"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createSpinnerLoop = void 0;
/**
 * Returns an object capable of managing setInterval calls related to a spinner.
 * @remarks This implementation was based on code from [spinnies](https://github.com/jcarpanelli/spinnies) (MIT).
 */
function createSpinnerLoop(spinner) {
    let currentFrameIndex = 0;
    let currentInterval = null;
    const stop = () => {
        if (currentInterval) {
            clearInterval(currentInterval);
        }
    };
    const start = (callback) => {
        const { frames, interval } = spinner;
        stop();
        callback(frames[currentFrameIndex]);
        currentInterval = setInterval(() => {
            const index = currentFrameIndex;
            callback(frames[index]);
            currentFrameIndex = index === frames.length - 1 ? 0 : index + 1;
        }, interval);
    };
    return { start, stop, currentFrameIndex: () => currentFrameIndex };
}
exports.createSpinnerLoop = createSpinnerLoop;
exports.default = createSpinnerLoop;
