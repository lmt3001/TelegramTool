{
  "version": 3,
  "sources": ["../../../src/builder/Inputs.ts"],
  "sourcesContent": ["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type { Infer } from 'superstruct';\nimport { array, boolean, integer, object, string, union } from 'superstruct';\nimport type { ObjectId, SharedObjectRef } from '../types/index.js';\nimport { normalizeSuiAddress, SuiObjectRef } from '../types/index.js';\nimport { builder } from './bcs.js';\n\nconst ObjectArg = union([\n\tobject({ ImmOrOwned: SuiObjectRef }),\n\tobject({\n\t\tShared: object({\n\t\t\tobjectId: string(),\n\t\t\tinitialSharedVersion: union([integer(), string()]),\n\t\t\tmutable: boolean(),\n\t\t}),\n\t}),\n]);\n\nexport const PureCallArg = object({ Pure: array(integer()) });\nexport const ObjectCallArg = object({ Object: ObjectArg });\nexport type PureCallArg = Infer<typeof PureCallArg>;\nexport type ObjectCallArg = Infer<typeof ObjectCallArg>;\n\nexport const BuilderCallArg = union([PureCallArg, ObjectCallArg]);\nexport type BuilderCallArg = Infer<typeof BuilderCallArg>;\n\nexport const Inputs = {\n\tPure(data: unknown, type?: string): PureCallArg {\n\t\treturn {\n\t\t\tPure: Array.from(\n\t\t\t\tdata instanceof Uint8Array\n\t\t\t\t\t? data\n\t\t\t\t\t: // NOTE: We explicitly set this to be growable to infinity, because we have maxSize validation at the builder-level:\n\t\t\t\t\t  builder.ser(type!, data, { maxSize: Infinity }).toBytes(),\n\t\t\t),\n\t\t};\n\t},\n\tObjectRef({ objectId, digest, version }: SuiObjectRef): ObjectCallArg {\n\t\treturn {\n\t\t\tObject: {\n\t\t\t\tImmOrOwned: {\n\t\t\t\t\tdigest,\n\t\t\t\t\tversion,\n\t\t\t\t\tobjectId: normalizeSuiAddress(objectId),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n\tSharedObjectRef({ objectId, mutable, initialSharedVersion }: SharedObjectRef): ObjectCallArg {\n\t\treturn {\n\t\t\tObject: {\n\t\t\t\tShared: {\n\t\t\t\t\tmutable,\n\t\t\t\t\tinitialSharedVersion,\n\t\t\t\t\tobjectId: normalizeSuiAddress(objectId),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n};\n\nexport function getIdFromCallArg(arg: ObjectId | ObjectCallArg) {\n\tif (typeof arg === 'string') {\n\t\treturn normalizeSuiAddress(arg);\n\t}\n\tif ('ImmOrOwned' in arg.Object) {\n\t\treturn normalizeSuiAddress(arg.Object.ImmOrOwned.objectId);\n\t}\n\treturn normalizeSuiAddress(arg.Object.Shared.objectId);\n}\n\nexport function getSharedObjectInput(arg: BuilderCallArg): SharedObjectRef | undefined {\n\treturn typeof arg === 'object' && 'Object' in arg && 'Shared' in arg.Object\n\t\t? arg.Object.Shared\n\t\t: undefined;\n}\n\nexport function isSharedObjectInput(arg: BuilderCallArg): boolean {\n\treturn !!getSharedObjectInput(arg);\n}\n\nexport function isMutableSharedObjectInput(arg: BuilderCallArg): boolean {\n\treturn getSharedObjectInput(arg)?.mutable ?? false;\n}\n"],
  "mappings": "AAIA,SAAS,OAAO,SAAS,SAAS,QAAQ,QAAQ,aAAa;AAE/D,SAAS,qBAAqB,oBAAoB;AAClD,SAAS,eAAe;AAExB,MAAM,YAAY,MAAM;AAAA,EACvB,OAAO,EAAE,YAAY,aAAa,CAAC;AAAA,EACnC,OAAO;AAAA,IACN,QAAQ,OAAO;AAAA,MACd,UAAU,OAAO;AAAA,MACjB,sBAAsB,MAAM,CAAC,QAAQ,GAAG,OAAO,CAAC,CAAC;AAAA,MACjD,SAAS,QAAQ;AAAA,IAClB,CAAC;AAAA,EACF,CAAC;AACF,CAAC;AAEM,MAAM,cAAc,OAAO,EAAE,MAAM,MAAM,QAAQ,CAAC,EAAE,CAAC;AACrD,MAAM,gBAAgB,OAAO,EAAE,QAAQ,UAAU,CAAC;AAIlD,MAAM,iBAAiB,MAAM,CAAC,aAAa,aAAa,CAAC;AAGzD,MAAM,SAAS;AAAA,EACrB,KAAK,MAAe,MAA4B;AAC/C,WAAO;AAAA,MACN,MAAM,MAAM;AAAA,QACX,gBAAgB,aACb;AAAA;AAAA,UAEA,QAAQ,IAAI,MAAO,MAAM,EAAE,SAAS,SAAS,CAAC,EAAE,QAAQ;AAAA;AAAA,MAC5D;AAAA,IACD;AAAA,EACD;AAAA,EACA,UAAU,EAAE,UAAU,QAAQ,QAAQ,GAAgC;AACrE,WAAO;AAAA,MACN,QAAQ;AAAA,QACP,YAAY;AAAA,UACX;AAAA,UACA;AAAA,UACA,UAAU,oBAAoB,QAAQ;AAAA,QACvC;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EACA,gBAAgB,EAAE,UAAU,SAAS,qBAAqB,GAAmC;AAC5F,WAAO;AAAA,MACN,QAAQ;AAAA,QACP,QAAQ;AAAA,UACP;AAAA,UACA;AAAA,UACA,UAAU,oBAAoB,QAAQ;AAAA,QACvC;AAAA,MACD;AAAA,IACD;AAAA,EACD;AACD;AAEO,SAAS,iBAAiB,KAA+B;AAC/D,MAAI,OAAO,QAAQ,UAAU;AAC5B,WAAO,oBAAoB,GAAG;AAAA,EAC/B;AACA,MAAI,gBAAgB,IAAI,QAAQ;AAC/B,WAAO,oBAAoB,IAAI,OAAO,WAAW,QAAQ;AAAA,EAC1D;AACA,SAAO,oBAAoB,IAAI,OAAO,OAAO,QAAQ;AACtD;AAEO,SAAS,qBAAqB,KAAkD;AACtF,SAAO,OAAO,QAAQ,YAAY,YAAY,OAAO,YAAY,IAAI,SAClE,IAAI,OAAO,SACX;AACJ;AAEO,SAAS,oBAAoB,KAA8B;AACjE,SAAO,CAAC,CAAC,qBAAqB,GAAG;AAClC;AAEO,SAAS,2BAA2B,KAA8B;AACxE,SAAO,qBAAqB,GAAG,GAAG,WAAW;AAC9C;",
  "names": []
}
